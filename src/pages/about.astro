---
import BaseLayout from '../layouts/BaseLayout.astro';
import Transparency from '../components/islands/Transparency.tsx';
import { getCollection } from 'astro:content';
import { slug } from '../lib/utils';

const featuredProjects = (await getCollection('projects'))
  .filter((p) => p.data.featured)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 5);

const recentPosts = (await getCollection('blog'))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---

<BaseLayout
  title="About"
  description="I build things that think, break, and sometimes both. AI safety researcher and systems thinker. Building things that think, break, and sometimes both. Based in Tasmania."
>
  <script
    type="application/ld+json"
    set:html={JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'Person',
      name: 'Adrian Wedd',
      url: 'https://adrianwedd.com',
      description: 'AI safety researcher and systems thinker based in Tasmania',
      jobTitle: 'Independent AI Safety Researcher',
      workLocation: {
        '@type': 'Place',
        name: 'Tasmania, Australia',
      },
      knowsAbout: [
        'AI Safety',
        'Systems Analysis',
        'Cybersecurity',
        'Multi-agent Systems',
        'Infrastructure Management',
      ],
      sameAs: ['https://github.com/adrianwedd'],
    })}
  />
  <article class="mx-auto max-w-3xl px-4 py-16 sm:px-6 lg:px-8">
    <header class="mb-12">
      <h1 class="text-text">About</h1>
    </header>

    <div class="space-y-6 leading-relaxed text-text">
      <p>I'm Adrian Wedd. I live in Tasmania and I build things that think, break, and sometimes both.</p>

      <p>
        I'm an independent AI safety researcher—building the multi-agent systems I study, writing about what happens
        when demonstrated risk meets institutional optimism, and trying to make more of that work public. Currently
        looking for interesting opportunities.
      </p>

      <p>
        I've worked in environmental advocacy, government, and infrastructure management. The thread through all of it
        is an obsession with how complex systems fail. This site is where all of that lands.
      </p>

      <h2 class="mt-12 text-text">How I Got Here</h2>

      <div class="mt-6 border-l-2 border-border pl-6 space-y-6">
        <div>
          <p class="text-xs font-medium text-accent">Environmental Advocacy</p>
          <p class="mt-1 text-sm text-text-muted">
            Started in conservation — learning how ecosystems fail when feedback loops break. First exposure to systems
            thinking at scale.
          </p>
        </div>
        <div>
          <p class="text-xs font-medium text-accent">Government</p>
          <p class="mt-1 text-sm text-text-muted">
            Policy and public administration. Saw firsthand how institutions process (and ignore) risk. The gap between
            knowing and acting became a recurring theme.
          </p>
        </div>
        <div>
          <p class="text-xs font-medium text-accent">Infrastructure</p>
          <p class="mt-1 text-sm text-text-muted">
            Managing systems that can't afford to fail. Learned that reliability is a practice, not a property — and
            that most failures are systemic, not technical.
          </p>
        </div>
        <div>
          <p class="text-xs font-medium text-accent">AI Safety</p>
          <p class="mt-1 text-sm text-text-muted">
            Everything converges here. Multi-agent systems, failure modes, institutional blind spots. Building the tools
            to surface what models actually do, not what we hope they do.
          </p>
        </div>
      </div>

      <h2 class="mt-12 text-text">What I'm Working On</h2>

      <p>
        Right now: AI safety frameworks that start from what can go wrong, not what should go right. Multi-agent systems
        where the safety constraints are physical, not theoretical. And the gap between what organisations know about
        technological risk and what they actually do about it — which turns out to be enormous.
      </p>

      <p>
        I also write, make art, and occasionally record audio. This site is the workbench — finished work, ongoing
        experiments, and raw thinking all in one place.
      </p>

      <h2 class="mt-12 text-text">Elsewhere</h2>

      <ul class="space-y-2">
        <li>
          <a href="https://github.com/adrianwedd" target="_blank" rel="noopener">GitHub</a>
          <span class="text-text-muted"> — 115+ repos across AI, security, music tools, and more</span>
        </li>
        <li>
          <a href="https://failurefirst.org" target="_blank" rel="noopener">Failure First</a>
          <span class="text-text-muted"> — AI safety methodology</span>
        </li>
        <li>
          <a href="https://thiswasntinthebrochure.wtf" target="_blank" rel="noopener">This Wasn't in the Brochure</a>
          <span class="text-text-muted"> — a book about parenting and neurodivergence</span>
        </li>
      </ul>

      <h2 id="privacy" class="mt-12 text-text">Privacy</h2>

      <p>
        This site respects your choices. No tracking happens without consent. Analytics (if enabled) uses Google
        Analytics 4 with cookie flags set to SameSite=Lax and Secure. Personalisation stores visit data locally in your
        browser — nothing leaves your machine.
      </p>

      <p>You can see exactly what this site knows about you and reset it at any time.</p>

      <Transparency client:load />
    </div>

    {/* Connected work */}
    {
      featuredProjects.length > 0 && (
        <aside class="mt-16 border-t border-border pt-8">
          <h2 class="mb-4 text-lg font-semibold text-text">Featured Work</h2>
          <div class="space-y-3">
            {featuredProjects.map((project) => (
              <a href={`/projects/${slug(project.id)}/`} class="group flex items-center gap-3 no-underline">
                <span class="text-sm text-text transition-colors group-hover:text-accent">{project.data.title}</span>
                <span class="text-xs text-text-muted">{project.data.description}</span>
              </a>
            ))}
          </div>
        </aside>
      )
    }

    {
      recentPosts.length > 0 && (
        <aside class="mt-8 border-t border-border pt-8">
          <h2 class="mb-4 text-lg font-semibold text-text">Recent Writing</h2>
          <div class="space-y-3">
            {recentPosts.map((post) => (
              <a href={`/blog/${slug(post.id)}/`} class="group flex items-center gap-3 no-underline">
                <span class="text-sm text-text transition-colors group-hover:text-accent">{post.data.title}</span>
                <time class="text-xs text-text-muted" datetime={post.data.date.toISOString()}>
                  {post.data.date.toLocaleDateString('en-AU', { day: 'numeric', month: 'short' })}
                </time>
              </a>
            ))}
          </div>
        </aside>
      )
    }
  </article>
</BaseLayout>
